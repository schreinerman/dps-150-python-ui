// JavaScript translation file for web application
const translations = {
    en: {
        appTitle: 'FNIRSI DPS-150 - Python Edition',
        connection: 'Connection',
        port: 'Port',
        refresh: 'Refresh',
        connect: 'Connect',
        disconnect: 'Disconnect',
        connectDevice: 'Connect FNIRSI DPS-150',
        
        // Measurements
        voltage: 'Voltage',
        current: 'Current',
        power: 'Power',
        
        // Settings
        setVoltage: 'Set Voltage',
        setCurrent: 'Set Current',
        set: 'Set',
        
        // Output
        output: 'Output',
        enable: 'Enable',
        disable: 'Disable',
        on: 'ON',
        off: 'OFF',
        
        // Protection
        protection: 'Protection',
        ovp: 'OVP',
        ocp: 'OCP',
        opp: 'OPP',
        protectionActive: 'Protection active',
        
        // Display
        display: 'Display',
        brightness: 'Brightness',
        
        // Graph
        graph: 'Graph',
        time: 'Time',
        
        // Info
        temperature: 'Temperature',
        capacity: 'Capacity',
        energy: 'Energy',
        mode: 'Mode',
        
        // Status
        status: 'Status',
        connected: 'Connected',
        disconnected: 'Disconnected',
    },
    de: {
        appTitle: 'FNIRSI DPS-150 - Python Edition',
        connection: 'Verbindung',
        port: 'Port',
        refresh: 'Aktualisieren',
        connect: 'Verbinden',
        disconnect: 'Trennen',
        connectDevice: 'FNIRSI DPS-150 verbinden',
        
        // Measurements
        voltage: 'Spannung',
        current: 'Strom',
        power: 'Leistung',
        
        // Settings
        setVoltage: 'Spannung einstellen',
        setCurrent: 'Strom einstellen',
        set: 'Set',
        
        // Output
        output: 'Output',
        enable: 'Aktivieren',
        disable: 'Deaktivieren',
        on: 'EIN',
        off: 'AUS',
        
        // Protection
        protection: 'Schutz',
        ovp: 'OVP',
        ocp: 'OCP',
        opp: 'OPP',
        protectionActive: 'Schutz aktiv',
        
        // Display
        display: 'Display',
        brightness: 'Helligkeit',
        
        // Graph
        graph: 'Graph',
        time: 'Zeit',
        
        // Info
        temperature: 'Temperatur',
        capacity: 'Kapazität',
        energy: 'Energie',
        mode: 'Modus',
        
        // Status
        status: 'Status',
        connected: 'Verbunden',
        disconnected: 'Getrennt',
    },
    fr: {
        appTitle: 'FNIRSI DPS-150 - Python Edition',
        connection: 'Connexion',
        port: 'Port',
        refresh: 'Actualiser',
        connect: 'Connecter',
        disconnect: 'Déconnecter',
        connectDevice: 'Connecter FNIRSI DPS-150',
        
        // Measurements
        voltage: 'Tension',
        current: 'Courant',
        power: 'Puissance',
        
        // Settings
        setVoltage: 'Régler la tension',
        setCurrent: 'Régler le courant',
        set: 'Réglage',
        
        // Output
        output: 'Sortie',
        enable: 'Activer',
        disable: 'Désactiver',
        on: 'ACTIVÉE',
        off: 'DÉSACTIVÉE',
        
        // Protection
        protection: 'Protection',
        ovp: 'OVP',
        ocp: 'OCP',
        opp: 'OPP',
        protectionActive: 'Protection active',
        
        // Display
        display: 'Affichage',
        brightness: 'Luminosité',
        
        // Graph
        graph: 'Graphique',
        time: 'Temps',
        
        // Info
        temperature: 'Température',
        capacity: 'Capacité',
        energy: 'Énergie',
        mode: 'Mode',
        
        // Status
        status: 'Statut',
        connected: 'Connecté',
        disconnected: 'Déconnecté',
    },
    es: {
        appTitle: 'FNIRSI DPS-150 - Python Edition',
        connection: 'Conexión',
        port: 'Puerto',
        refresh: 'Actualizar',
        connect: 'Conectar',
        disconnect: 'Desconectar',
        connectDevice: 'Conectar FNIRSI DPS-150',
        
        // Measurements
        voltage: 'Voltaje',
        current: 'Corriente',
        power: 'Potencia',
        
        // Settings
        setVoltage: 'Ajustar voltaje',
        setCurrent: 'Ajustar corriente',
        set: 'Ajuste',
        
        // Output
        output: 'Salida',
        enable: 'Activar',
        disable: 'Desactivar',
        on: 'ENCENDIDA',
        off: 'APAGADA',
        
        // Protection
        protection: 'Protección',
        ovp: 'OVP',
        ocp: 'OCP',
        opp: 'OPP',
        protectionActive: 'Protección activa',
        
        // Display
        display: 'Pantalla',
        brightness: 'Brillo',
        
        // Graph
        graph: 'Gráfico',
        time: 'Tiempo',
        
        // Info
        temperature: 'Temperatura',
        capacity: 'Capacidad',
        energy: 'Energía',
        mode: 'Modo',
        
        // Status
        status: 'Estado',
        connected: 'Conectado',
        disconnected: 'Desconectado',
    },
    zh: {
        appTitle: 'FNIRSI DPS-150 - Python Edition',
        connection: '连接',
        port: '端口',
        refresh: '刷新',
        connect: '连接',
        disconnect: '断开',
        connectDevice: '连接 FNIRSI DPS-150',
        
        // Measurements
        voltage: '电压',
        current: '电流',
        power: '功率',
        
        // Settings
        setVoltage: '设置电压',
        setCurrent: '设置电流',
        set: '设置',
        
        // Output
        output: '输出',
        enable: '启用',
        disable: '禁用',
        on: '开启',
        off: '关闭',
        
        // Protection
        protection: '保护',
        ovp: 'OVP',
        ocp: 'OCP',
        opp: 'OPP',
        protectionActive: '保护激活',
        
        // Display
        display: '显示',
        brightness: '亮度',
        
        // Graph
        graph: '图表',
        time: '时间',
        
        // Info
        temperature: '温度',
        capacity: '容量',
        energy: '能量',
        mode: '模式',
        
        // Status
        status: '状态',
        connected: '已连接',
        disconnected: '未连接',
    },
};

// Get browser language
function getBrowserLanguage() {
    const lang = navigator.language || navigator.userLanguage;
    const langCode = lang.split('-')[0].toLowerCase();
    return translations[langCode] ? langCode : 'en';
}

// Current language
let currentLanguage = getBrowserLanguage();

// Translation function
function t(key) {
    return translations[currentLanguage][key] || key;
}

// Set language function
function setLanguage(lang) {
    if (translations[lang]) {
        currentLanguage = lang;
        localStorage.setItem('language', lang);
        return true;
    }
    return false;
}

// Load saved language preference
const savedLang = localStorage.getItem('language');
if (savedLang && translations[savedLang]) {
    currentLanguage = savedLang;
}
